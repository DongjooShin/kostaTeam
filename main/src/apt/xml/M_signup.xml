<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">



<mapper namespace="apt.mapper.M_signupMapper"> <!-- namespace를 꼭 맞게 써주어야함 -->
   <cache />
   
   
   <insert id="insertAPTsale" parameterType="Property">
      


     insert into Property(
        pr_group,pr_APTName,pr_addr,pr_price,pr_deposit,pr_level,pr_totalLevel,pr_doorStruct,
        pr_roomNum,pr_bathNum,pr_roomArea,pr_scale,pr_company,pr_content,
        pr_propertyNo,pr_imageName,pr_tel,pr_date
      )
      values(
     #{pr_group},#{pr_APTName},#{pr_addr},#{pr_price},#{pr_deposit},#{pr_level},#{pr_totalLevel},
     #{pr_doorStruct},#{pr_roomNum},#{pr_bathNum},#{pr_roomArea},#{pr_scale},#{pr_company},
     #{pr_content},#{pr_propertyNo},#{pr_imageName},#{pr_tel},SYSDATE
           )
    
   </insert>
   
   <select id="listSale" resultType="Property" parameterType="Search2">
   select * from property
   
	  <if test="area!= null">
   	<where>
   		<foreach collection="area" item="item" separator="or"
   			open="(" close=")">
   			${item} LIKE #{searchKey}
   		</foreach>
   	</where>
   
   </if>
	   order by pr_propertyNo desc
   </select>
   
   
    
   
 
   
 <!--    <select id="listSale2" resultType="Message" parameterType="Search">
   select * from message 
   
	  <if test="area!= null">
   	<where>
   		<foreach collection="area" item="item" separator="or"
   			open="(" close=")">
   			${item} LIKE #{searchKey}
   		</foreach>
   	</where>
   
   </if>
	   order by mg_date desc
   </select> -->

   
   
   
   
   
    <select id="countSale" resultType="int" parameterType="Search">
    select count(*) from property
    <if test="area!= null">
   	<where>
   		<foreach collection="area" item="item" separator="or"
   			open="(" close=")">
   			${item} LIKE #{searchKey}
   		</foreach>
   	</where>
   
   </if>
   </select>
   
   
     <select id="listSale2" resultType="Message" parameterType="Search2">
   select * from message where m_memberNo = #{m_memberNo}
   
	<!--   <if test="area!= null">
	  
   	<where>
   		<foreach collection="area" item="item" separator="or"
   			open="(" close=")">
   			${item} LIKE #{searchKey}
   		</foreach>
   	</where> 
   
   </if> -->
	   order by mg_date desc
	  
   </select>
   
   
   
    <select id="countSale2" resultType="int" parameterType="Search2">
    select count(*) from message
  
    <if test="area!= null">
   	<where>
   		<foreach collection="area" item="item" separator="or"
   			open="(" close=")">
   			${item} LIKE #{searchKey}
   		</foreach>
   	</where>
   
   </if>
   </select>
   
   
   
   
   
   
   
   
   <select id="selectAPT" parameterType="int" resultType="Property">
   select * from property  where pr_propertyNo = #{pr_propertyNo}
   </select>
   
   
   <!-- 자동번호  -->
   
   <select id="selectPr_id" resultType="Integer">
   	select  max(pr_propertyNo) from property
   </select>
   
    
   <select id="selectM_id" parameterType="String" resultType="Property">
   select * from property  where m_memberNo = #{m_memberNo}
   </select>
   
     
 <insert id="insertMsg2" parameterType="Message">
     insert into Message(
    	MG_CONTENT,MG_MESSAGENO,mg_date,m_memberNo,mg_to,mg_state
    	
      )
      values(
     	 #{mg_content},#{mg_messageNo},SYSDATE,#{m_memberNo},#{m_memberNo},#{mg_state}

      )
    
   </insert>
  
   <select id="countBoard" resultType="Integer">
   select  max(mg_messageNo) from message

   </select>
   
   
 <!--   
   <insert id="insertMessage" parameterMap="Message">
   insert into message(mg_messageNo,mg_from,mg_to,mg_content,mg_date,mg_state,m_memberNo)
   values(#{mg_messageNo},#{mg_from},#{mg_to},#{mg_content},SYS_TIMESTAMP,f,#{m_memberNo})
   
   </insert>
   
    <select id="mg_messageNo" resultType="Integer">
   	select  max(pr_propertyNo) from message
   </select> -->
   
 
   
</mapper>








